<header class="w-full border-b border-gray-200 sticky top-0 z-50 bg-white">
  <div class="max-w-7xl mx-auto px-4">
    <div class="relative flex items-center justify-between h-20">
      <!-- Left: Navbar items -->
      <nav class="hidden md:flex items-center gap-6 text-sm">
        {{ $current := . }}
        {{ range .Site.Menus.main }}
          <a href="{{ .URL }}"
             class="relative inline-block transition-colors duration-200 {{ if or ($current.IsMenuCurrent "main" .) ($current.HasMenuCurrent "main" .) }}text-black font-medium{{ else }}text-gray-700 hover:text-indigo-700{{ end }}
                    after:absolute after:left-0 after:-bottom-1 after:h-0.5 after:w-0 after:bg-indigo-700 after:transition-all after:duration-200 hover:after:w-full">
            {{ .Name }}
          </a>
        {{ end }}
      </nav>

      <!-- Center: Logo / Site title -->
      <a href="{{ "/" | relURL }}" class="absolute left-1/2 transform -translate-x-1/2">
        {{ $logo := "" }}
        {{ $formats := slice "svg" "png" "jpg" "webp" "avif" }}
        {{ range $ext := $formats }}
          {{ $path := printf "/images/logo.%s" $ext }}
          {{ if fileExists (printf "static/%s" $path) }}
            {{ $logo = $path }}
          {{ end }}
        {{ end }}
        {{ if $logo }}
          <img src="{{ $logo | relURL }}?v={{ now.Unix }}" alt="{{ .Site.Title }} logo" class="block h-10 md:h-12 lg:h-14 object-contain mx-auto" loading="eager" />
        {{ else }}
          <span class="text-xl font-bold">{{ .Site.Title }}</span>
        {{ end }}
      </a>

      <!-- Right: Icons & mobile menu trigger -->
      <div class="flex items-center gap-4">
        <button class="md:hidden" aria-label="Open Menu" onclick="document.getElementById('mobile-nav').classList.toggle('hidden')">
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path d="M4 6h16v2H4V6Zm0 5h16v2H4v-2Zm0 5h16v2H4v-2Z"/></svg>
        </button>
      </div>
    </div>
  </div>
  <div id="mobile-nav" class="md:hidden hidden border-t border-gray-200">
    <div class="max-w-7xl mx-auto px-4 py-3 flex flex-col gap-2">
      {{ range .Site.Menus.main }}
        <a href="{{ .URL }}" class="py-2 text-gray-700 hover:text-black">{{ .Name }}</a>
      {{ end }}
    </div>
  </div>
</header>

